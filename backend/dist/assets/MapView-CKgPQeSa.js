import{R as E,j as v,L as oe,g as re,r as l,c as V}from"./index-CwUWXPct.js";import{G as se}from"./requests-DLM1xaaj.js";const U=t=>{let e;const n=new Set,o=(u,d)=>{const m=typeof u=="function"?u(e):u;if(!Object.is(m,e)){const p=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(g=>g(e,p))}},r=()=>e,a={setState:o,getState:r,getInitialState:()=>f,subscribe:u=>(n.add(u),()=>n.delete(u))},f=e=t(o,r,a);return a},ae=t=>t?U(t):U,ie=t=>t;function le(t,e=ie){const n=E.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return E.useDebugValue(n),n}const ce=t=>{const e=ae(t),n=o=>le(e,o);return Object.assign(n,e),n},ue=t=>ce(t),J=ue(t=>({events:[],points:[],setEvents:e=>{const n=e.map(o=>Object.fromEntries(Object.entries(o).map(([r,s])=>[r.toLowerCase(),s])));t({events:n,points:n.map(o=>({lat:o.lat,lng:o.lon,marker:o.ignicion==="Motor Encendido"}))})},resetEvents:()=>t({events:[],points:[]})})),de=t=>{const e=new Date(t),n={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};return e.toLocaleString("es-MX",n)},N=({name:t,value:e,ignicion:n,off:o})=>v.jsxs("dl",{className:"mb-1 flex items-center gap-2",children:[v.jsxs("dt",{className:"text-gray-300 font-bold",children:[t,":"]})," ",v.jsx("dd",{className:`text-gray-200 ${n?o?"bg-green-500 px-1 rounded-sm":"bg-red-500 px-1 rounded-sm":""}`,children:e})]}),et=({id:t,name:e,show:n})=>{const o=J(r=>r.events);return v.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 max-h-[400px] overflow-y-auto bg-gray-800 shadow-md",children:[v.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-200 flex gap-2 items-center",children:["Historial de eventos",n&&v.jsx(oe,{target:"_blank",to:`/reports/${t}?unit=${e}`,className:"bg-blue-500 hover:bg-blue-700 rounded-sm px-2 py-1 text-sm hover:scale-105 transition text-white",children:"Ver reportes"})]}),v.jsx("div",{}),o.map(r=>v.jsxs("div",{className:"mb-4 p-2 border border-gray-700 rounded-lg bg-gray-700",children:[v.jsx("div",{className:"text-center",children:v.jsxs("p",{children:["LAT: ",r.lat," - LON: ",r.lon]})}),v.jsx(N,{name:"Estado",value:r.desc_msg}),v.jsx(N,{name:"Odómetro",value:`${r.odometro_kms} km.`}),v.jsx(N,{name:"Ignición",value:r.ignicion,ignicion:!0,off:r.ignicion!=="Motor Apagado"}),v.jsx(N,{name:"Última Actualización",value:de(r.dt_msg)})]},`${r.dtmsg}-${r.dt_msg}`))]})};var H,$;function fe(){return $||($=1,H=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var o,r,s;if(Array.isArray(e)){if(o=e.length,o!=n.length)return!1;for(r=o;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),o=s.length,o!==Object.keys(n).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=o;r--!==0;){var i=s[r];if(!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}),H}var me=fe();const ge=re(me);function x(){return x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},x.apply(null,arguments)}function A(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.includes(o))continue;n[o]=t[o]}return n}function pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function he(t){var e=pe(t,"string");return typeof e=="symbol"?e:e+""}const w={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},ve="https://maps.googleapis.com/maps/api/js";class P{static async load(e,n){var o;const r=e.libraries?e.libraries.split(","):[],s=this.serializeParams(e);this.listeners.push(n),(o=window.google)!=null&&(o=o.maps)!=null&&o.importLibrary?(this.serializedApiParams||(this.loadingStatus=w.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=s,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==s&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const i=["maps",...r];await Promise.all(i.map(a=>google.maps.importLibrary(a)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const o=()=>n||(n=new Promise((r,s)=>{var i;const a=document.createElement("script"),f=new URLSearchParams;for(const[u,d]of Object.entries(e)){const m=u.replace(/[A-Z]/g,p=>"_"+p[0].toLowerCase());f.set(m,String(d))}f.set("loading","async"),f.set("callback","__googleMapsCallback__"),a.async=!0,a.src=ve+"?"+f.toString(),a.nonce=((i=document.querySelector("script[nonce]"))==null?void 0:i.nonce)||"",a.onerror=()=>{this.loadingStatus=w.FAILED,this.notifyLoadingStatusListeners(),s(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=w.LOADED,this.notifyLoadingStatusListeners(),r()},window.gm_authFailure=()=>{this.loadingStatus=w.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=w.LOADING,this.notifyLoadingStatusListeners(),document.head.append(a)}),n);google.maps.importLibrary=r=>o().then(()=>google.maps.importLibrary(r))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}P.loadingStatus=w.NOT_LOADED;P.serializedApiParams=void 0;P.listeners=[];const Ee=["onLoad","onError","apiKey","version","libraries"],ye=["children"],be="GMP_visgl_rgmlibrary_v1_default",D=E.createContext(null);function Ce(){const[t,e]=l.useState({});return{mapInstances:t,addMapInstance:(s,i="default")=>{e(a=>x({},a,{[i]:s}))},removeMapInstance:(s="default")=>{e(i=>A(i,[s].map(he)))},clearMapInstances:()=>{e({})}}}function Le(t){const{onLoad:e,onError:n,apiKey:o,version:r,libraries:s=[]}=t,i=A(t,Ee),[a,f]=l.useState(P.loadingStatus),[u,d]=l.useReducer((c,h)=>c[h.name]?c:x({},c,{[h.name]:h.value}),{}),m=l.useMemo(()=>s==null?void 0:s.join(","),[s]),p=l.useMemo(()=>JSON.stringify(x({apiKey:o,version:r},i)),[o,r,i]),g=l.useCallback(async c=>{var h;if(u[c])return u[c];if(!((h=google)!=null&&(h=h.maps)!=null&&h.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const C=await window.google.maps.importLibrary(c);return d({name:c,value:C}),C},[u]);return l.useEffect(()=>{(async()=>{try{const c=x({key:o},i);r&&(c.v=r),(m==null?void 0:m.length)>0&&(c.libraries=m),(c.channel===void 0||c.channel<0||c.channel>999)&&delete c.channel,c.solutionChannel===void 0?c.solutionChannel=be:c.solutionChannel===""&&delete c.solutionChannel,await P.load(c,h=>f(h));for(const h of["core","maps",...s])await g(h);e&&e()}catch(c){n?n(c):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",c)}})()},[o,m,p]),{status:a,loadedLibraries:u,importLibrary:g}}const Oe=t=>{const{children:e}=t,n=A(t,ye),{mapInstances:o,addMapInstance:r,removeMapInstance:s,clearMapInstances:i}=Ce(),{status:a,loadedLibraries:f,importLibrary:u}=Le(n),d=l.useMemo(()=>({mapInstances:o,addMapInstance:r,removeMapInstance:s,clearMapInstances:i,status:a,loadedLibraries:f,importLibrary:u}),[o,r,s,i,a,f,u]);return E.createElement(D.Provider,{value:d},e)};function xe(t,e){for(const n of _e){const o=e[n],r=K[n];l.useEffect(()=>{if(!t||!o)return;const s=google.maps.event.addListener(t,r,i=>{o(Me(r,t,i))});return()=>s.remove()},[t,r,o])}}function Me(t,e,n){const o={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(Se.includes(t)){const s=o,i=e.getCenter(),a=e.getZoom(),f=e.getHeading()||0,u=e.getTilt()||0,d=e.getBounds();return(!i||!d||!Number.isFinite(a))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),s.detail={center:(i==null?void 0:i.toJSON())||{lat:0,lng:0},zoom:a||0,heading:f,tilt:u,bounds:(d==null?void 0:d.toJSON())||{north:90,east:180,south:-90,west:-180}},s}else if(we.includes(t)){var r;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const s=o;return s.domEvent=n.domEvent,s.stoppable=!0,s.stop=()=>n.stop(),s.detail={latLng:((r=n.latLng)==null?void 0:r.toJSON())||null,placeId:n.placeId},s}return o}const K={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Se=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],we=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],_e=Object.keys(K);function Ie(t,e){const n=l.useRef(void 0);(!n.current||!ge(e,n.current))&&(n.current=e),l.useEffect(t,n.current)}const Te=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function ke(t,e){const n={},o=Object.keys(e);for(const r of o)Te.has(r)&&(n[r]=e[r]);Ie(()=>{t&&t.setOptions(n)},[n])}function Y(){var t;return((t=l.useContext(D))==null?void 0:t.status)||w.NOT_LOADED}function Ae(t,e){const{viewport:n,viewState:o}=e,r=!!n;return l.useLayoutEffect(()=>{if(!t||!o)return;const{latitude:s,longitude:i,bearing:a,pitch:f,zoom:u}=o;t.moveCamera({center:{lat:s,lng:i},heading:a,tilt:f,zoom:u+1})},[t,o]),r}function Pe(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function W(t){return Pe(t)?t:t.toJSON()}function De(t,e,n){const o=n.center?W(n.center):null;let r=null,s=null;o&&Number.isFinite(o.lat)&&Number.isFinite(o.lng)&&(r=o.lat,s=o.lng);const i=Number.isFinite(n.zoom)?n.zoom:null,a=Number.isFinite(n.heading)?n.heading:null,f=Number.isFinite(n.tilt)?n.tilt:null;l.useLayoutEffect(()=>{if(!t)return;const u={};let d=!1;r!==null&&s!==null&&(e.current.center.lat!==r||e.current.center.lng!==s)&&(u.center={lat:r,lng:s},d=!0),i!==null&&e.current.zoom!==i&&(u.zoom=i,d=!0),a!==null&&e.current.heading!==a&&(u.heading=a,d=!0),f!==null&&e.current.tilt!==f&&(u.tilt=f,d=!0),d&&t.moveCamera(u)})}const Ne=()=>{const t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return E.createElement("div",{style:t},E.createElement("h2",null,"Error: AuthFailure"),E.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",E.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function je(){const[t,e]=l.useState(null),n=l.useCallback(o=>e(o),[e]);return[t,n]}function X(){return Y()===w.LOADED}function ze(){const[,t]=l.useReducer(e=>e+1,0);return t}function Fe(t,e){const n=t.getCenter(),o=t.getZoom(),r=t.getHeading()||0,s=t.getTilt()||0,i=t.getBounds();(!n||!i||!Number.isFinite(o))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:(n==null?void 0:n.toJSON())||{lat:0,lng:0},zoom:o||0,heading:r,tilt:s})}function Re(t){const e=ze(),n=l.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return l.useEffect(()=>{if(!t)return;const o=google.maps.event.addListener(t,"bounds_changed",()=>{Fe(t,n),e()});return()=>o.remove()},[t,e]),n}const Be=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"],He=["padding"];class F{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,n){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(n)}}F.entries={};function Ge(t,e){const n=X(),[o,r]=l.useState(null),[s,i]=je(),a=Re(o),{id:f,defaultBounds:u,defaultCenter:d,defaultZoom:m,defaultHeading:p,defaultTilt:g,reuseMaps:c,renderingType:h,colorScheme:C}=t,y=A(t,Be),M=t.zoom!==void 0||t.defaultZoom!==void 0,_=t.center!==void 0||t.defaultCenter!==void 0;!u&&(!M||!_)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!y.center&&d&&(y.center=d),!y.zoom&&Number.isFinite(m)&&(y.zoom=m),!y.heading&&Number.isFinite(p)&&(y.heading=p),!y.tilt&&Number.isFinite(g)&&(y.tilt=g);for(const L of Object.keys(y))y[L]===void 0&&delete y[L];const I=l.useRef(void 0);return l.useEffect(()=>{if(!s||!n)return;const{addMapInstance:L,removeMapInstance:O}=e,{mapId:S}=t,k=`${S||"default"}:${h||"default"}:${C||"LIGHT"}`;let T,b;if(c&&F.has(k)?(b=F.pop(k),T=b.getDiv(),s.appendChild(T),b.setOptions(y),setTimeout(()=>b.setCenter(b.getCenter()),0)):(T=document.createElement("div"),T.style.height="100%",s.appendChild(T),b=new google.maps.Map(T,x({},y,h?{renderingType:h}:{},C?{colorScheme:C}:{}))),r(b),L(b,f),u){const{padding:R}=u,B=A(u,He);b.fitBounds(B,R)}else(!M||!_)&&b.fitBounds({east:180,west:-180,south:-90,north:90});if(I.current){const{mapId:R,cameraState:B}=I.current;R!==S&&b.setOptions(B)}return()=>{I.current={mapId:S,cameraState:a.current},T.remove(),c?F.push(k,b):google.maps.event.clearInstanceListeners(b),r(null),O(f)}},[s,n,f,t.mapId,t.renderingType,t.colorScheme]),[o,i,a]}const Q=E.createContext(null),ee=t=>{const{children:e,id:n,className:o,style:r}=t,s=l.useContext(D),i=Y();if(!s)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[a,f,u]=Ge(t,s);De(a,u,t),xe(a,t),ke(a,t);const d=Ae(a,t),m=!!t.controlled;l.useEffect(()=>{if(a)return d&&a.setOptions({disableDefaultUI:!0}),(d||m)&&a.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{a.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[a,d,m,t.gestureHandling,t.keyboardShortcuts]);const p=t.center?W(t.center):null;let g=null,c=null;p&&Number.isFinite(p.lat)&&Number.isFinite(p.lng)&&(g=p.lat,c=p.lng);const h=l.useMemo(()=>{var M,_,I,L,O;return{center:{lat:(M=g)!=null?M:0,lng:(_=c)!=null?_:0},zoom:(I=t.zoom)!=null?I:0,heading:(L=t.heading)!=null?L:0,tilt:(O=t.tilt)!=null?O:0}},[g,c,t.zoom,t.heading,t.tilt]);l.useLayoutEffect(()=>{if(!a||!m)return;a.moveCamera(h);const M=a.addListener("bounds_changed",()=>{a.moveCamera(h)});return()=>M.remove()},[a,m,h]);const C=l.useMemo(()=>x({width:"100%",height:"100%",position:"relative",zIndex:d?-1:0},r),[r,d]),y=l.useMemo(()=>({map:a}),[a]);return i===w.AUTH_FAILURE?E.createElement("div",{style:x({position:"relative"},o?{}:C),className:o},E.createElement(Ne,null)):E.createElement("div",x({ref:f,"data-testid":"map",style:o?void 0:C,className:o},n?{id:n}:{}),a?E.createElement(Q.Provider,{value:y},e):null)};ee.deckGLViewProps=!0;const Z=new Set;function G(...t){const e=JSON.stringify(t);Z.has(e)||(Z.add(e),console.error(...t))}const te=(t=null)=>{const e=l.useContext(D),{map:n}=l.useContext(Q)||{};if(e===null)return G("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:o}=e;return t!==null?o[t]||null:n||o.default||null};function Ue(t){const e=X(),n=l.useContext(D);return l.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),(n==null?void 0:n.loadedLibraries[t])||null}function j(t,e,n){l.useEffect(()=>{if(!t||!e||!n)return;const o=google.maps.event.addListener(t,e,n);return()=>o.remove()},[t,e,n])}function z(t,e,n){l.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}function q(t,e,n){l.useEffect(()=>{if(!(!t||!e||!n))return t.addEventListener(e,n),()=>t.removeEventListener(e,n)},[t,e,n])}function $e(t){return t.nodeType===Node.ELEMENT_NODE}const ne=E.createContext(null),Ze={TOP_LEFT:["0%","0%"],TOP_CENTER:["50%","0%"],TOP:["50%","0%"],TOP_RIGHT:["100%","0%"],LEFT_CENTER:["0%","50%"],LEFT_TOP:["0%","0%"],LEFT:["0%","50%"],LEFT_BOTTOM:["0%","100%"],RIGHT_TOP:["100%","0%"],RIGHT:["100%","50%"],RIGHT_CENTER:["100%","50%"],RIGHT_BOTTOM:["100%","100%"],BOTTOM_LEFT:["0%","100%"],BOTTOM_CENTER:["50%","100%"],BOTTOM:["50%","100%"],BOTTOM_RIGHT:["100%","100%"],CENTER:["50%","50%"]},qe=({children:t,styles:e,className:n,anchorPoint:o})=>{const[r,s]=o??Ze.BOTTOM,i=`translate(50%, 100%) translate(-${r}, -${s})`;return E.createElement("div",{style:{transform:i}},E.createElement("div",{className:n,style:e},t))};function Ve(t){const[e,n]=l.useState(null),[o,r]=l.useState(null),s=te(),i=Ue("marker"),{children:a,onClick:f,className:u,onMouseEnter:d,onMouseLeave:m,onDrag:p,onDragStart:g,onDragEnd:c,collisionBehavior:h,clickable:C,draggable:y,position:M,title:_,zIndex:I}=t,L=l.Children.count(a);return l.useEffect(()=>{if(!s||!i)return;const O=new i.AdvancedMarkerElement;O.map=s,n(O);let S=null;return L>0&&(S=document.createElement("div"),S.isCustomMarker=!0,O.content=S,r(S)),()=>{var k;O.map=null,(k=S)==null||k.remove(),n(null),r(null)}},[s,i,L]),l.useEffect(()=>{!e||!e.content||L>0||(e.content.className=u||"")},[e,u,L]),z(e,"position",M),z(e,"title",_??""),z(e,"zIndex",I),z(e,"collisionBehavior",h),l.useEffect(()=>{e&&(y!==void 0?e.gmpDraggable=y:p||g||c?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,y,p,c,g]),l.useEffect(()=>{if(!e)return;const O=C!==void 0||!!f||!!d||!!m;e.gmpClickable=O,O&&e!=null&&e.content&&$e(e.content)&&(e.content.style.pointerEvents="none",e.content.firstElementChild&&(e.content.firstElementChild.style.pointerEvents="all"))},[e,C,f,d,m]),j(e,"click",f),j(e,"drag",p),j(e,"dragstart",g),j(e,"dragend",c),q(e==null?void 0:e.element,"mouseenter",d),q(e==null?void 0:e.element,"mouseleave",m),[e,o]}const Je=l.forwardRef((t,e)=>{const{children:n,style:o,className:r,anchorPoint:s}=t,[i,a]=Ve(t),f=l.useMemo(()=>i?{marker:i}:null,[i]);return l.useImperativeHandle(e,()=>i,[i]),a?E.createElement(ne.Provider,{value:f},V.createPortal(E.createElement(qe,{anchorPoint:s,styles:o,className:r},n),a)):null}),Ke=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];function Ye(t){const[e,n]=l.useState(null),o=te(),{onClick:r,onDrag:s,onDragStart:i,onDragEnd:a,onMouseOver:f,onMouseOut:u}=t,d=A(t,Ke),{position:m,draggable:p}=d;return l.useEffect(()=>{if(!o){o===void 0&&console.error("<Marker> has to be inside a Map component.");return}const g=new google.maps.Marker(d);return g.setMap(o),n(g),()=>{g.setMap(null),n(null)}},[o]),l.useEffect(()=>{if(!e)return;const g=e,c=google.maps.event;return r&&c.addListener(g,"click",r),s&&c.addListener(g,"drag",s),i&&c.addListener(g,"dragstart",i),a&&c.addListener(g,"dragend",a),f&&c.addListener(g,"mouseover",f),u&&c.addListener(g,"mouseout",u),e.setDraggable(!!p),()=>{c.clearInstanceListeners(g)}},[e,p,r,s,i,a,f,u]),l.useEffect(()=>{e&&d&&e.setOptions(d)},[e,d]),l.useEffect(()=>{p||!m||!e||e.setPosition(m)},[p,m,e]),e}l.forwardRef((t,e)=>{const n=Ye(t);return l.useImperativeHandle(e,()=>n,[n]),E.createElement(E.Fragment,null)});const We=t=>{var e;const n=(e=l.useContext(ne))==null?void 0:e.marker,o=l.useMemo(()=>document.createElement("div"),[]);return l.useEffect(()=>{var r;if(!n){n===void 0&&console.error("The <Pin> component can only be used inside <AdvancedMarker>.");return}t.glyph&&t.children&&G("The <Pin> component only uses children to render the glyph if both the glyph property and children are present."),l.Children.count(t.children)>1&&G("Passing multiple children to the <Pin> component might lead to unexpected results.");const s=x({},t),i=new google.maps.marker.PinElement(s);t.children&&(i.glyph=o);const a=(r=n.content)==null||(r=r.firstChild)==null?void 0:r.firstChild;for(;a!=null&&a.firstChild;)a.removeChild(a.firstChild);a&&a.appendChild(i.element)},[n,o,t]),V.createPortal(t.children,o)},tt=()=>{const t=J(e=>e.points);return v.jsx("div",{className:"border border-gray-700 rounded-lg h-[400px] flex flex-col items-center justify-center bg-gray-800 p-4 shadow-md",children:v.jsx(Oe,{apiKey:se,children:v.jsx(ee,{defaultZoom:5,defaultCenter:{lat:24.167854,lng:-102.667606},mapId:"da37f3254c6a6d1c",children:t.map((e,n)=>v.jsxs(Je,{position:{lat:e.lat,lng:e.lng},children:[v.jsxs("div",{className:"absolute bg-black text-red-400 text-xs px-2 py-1 rounded-md shadow-md",children:[e.lat.toFixed(5),", ",e.lng.toFixed(5)]}),v.jsx(We,{background:e.marker?"#34D399":"#EF4444",glyphColor:"#000",borderColor:"#000"})]},n))})})})};export{et as E,tt as M,J as u};
