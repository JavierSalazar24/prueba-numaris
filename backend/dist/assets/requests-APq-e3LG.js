var de=t=>{throw TypeError(t)};var q=(t,e,s)=>e.has(t)||de("Cannot "+s);var r=(t,e,s)=>(q(t,e,"read from private field"),s?s.call(t):e.get(t)),f=(t,e,s)=>e.has(t)?de("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),u=(t,e,s,i)=>(q(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),d=(t,e,s)=>(q(t,e,"access private method"),s);import{S as Ce,p as fe,d as O,s as J,e as H,n as Ie,i as X,f as pe,t as Se,h as _e,k as je,l as ge,m as Oe,r as C,o as Me,j as _,L as me,q as be}from"./index-ztAEc4H0.js";var y,n,V,b,j,A,I,v,B,P,D,M,N,S,$,o,z,ee,te,se,re,ie,ne,ae,we,ve,Ne=(ve=class extends Ce{constructor(e,s){super();f(this,o);f(this,y);f(this,n);f(this,V);f(this,b);f(this,j);f(this,A);f(this,I);f(this,v);f(this,B);f(this,P);f(this,D);f(this,M);f(this,N);f(this,S);f(this,$,new Set);this.options=s,u(this,y,e),u(this,v,null),u(this,I,fe()),this.options.experimental_prefetchInRender||r(this,I).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,n).addObserver(this),ye(r(this,n),this.options)?d(this,o,z).call(this):this.updateResult(),d(this,o,re).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oe(r(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oe(r(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,o,ie).call(this),d(this,o,ne).call(this),r(this,n).removeObserver(this)}setOptions(e,s){const i=this.options,h=r(this,n);if(this.options=r(this,y).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,r(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,o,ae).call(this),r(this,n).setOptions(this.options),i._defaulted&&!J(this.options,i)&&r(this,y).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,n),observer:this});const l=this.hasListeners();l&&Ee(r(this,n),h,this.options,i)&&d(this,o,z).call(this),this.updateResult(s),l&&(r(this,n)!==h||O(this.options.enabled,r(this,n))!==O(i.enabled,r(this,n))||H(this.options.staleTime,r(this,n))!==H(i.staleTime,r(this,n)))&&d(this,o,ee).call(this);const a=d(this,o,te).call(this);l&&(r(this,n)!==h||O(this.options.enabled,r(this,n))!==O(i.enabled,r(this,n))||a!==r(this,S))&&d(this,o,se).call(this,a)}getOptimisticResult(e){const s=r(this,y).getQueryCache().build(r(this,y),e),i=this.createResult(s,e);return Qe(this,i)&&(u(this,b,i),u(this,A,this.options),u(this,j,r(this,n).state)),i}getCurrentResult(){return r(this,b)}trackResult(e,s){const i={};return Object.keys(e).forEach(h=>{Object.defineProperty(i,h,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(h),s==null||s(h),e[h])})}),i}trackProp(e){r(this,$).add(e)}getCurrentQuery(){return r(this,n)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=r(this,y).defaultQueryOptions(e),i=r(this,y).getQueryCache().build(r(this,y),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return d(this,o,z).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,b)))}createResult(e,s){var le;const i=r(this,n),h=this.options,l=r(this,b),a=r(this,j),w=r(this,A),R=e!==i?e.state:r(this,V),{state:T}=e;let c={...T},F=!1,g;if(s._optimisticResults){const m=this.hasListeners(),U=!m&&ye(e,s),Q=m&&Ee(e,i,s,h);(U||Q)&&(c={...c,...je(T.data,e.options)}),s._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:L,errorUpdatedAt:k,status:E}=c;if(s.select&&c.data!==void 0)if(l&&c.data===(a==null?void 0:a.data)&&s.select===r(this,B))g=r(this,P);else try{u(this,B,s.select),g=s.select(c.data),g=ge(l==null?void 0:l.data,g,s),u(this,P,g),u(this,v,null)}catch(m){u(this,v,m)}else g=c.data;if(s.placeholderData!==void 0&&g===void 0&&E==="pending"){let m;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(w==null?void 0:w.placeholderData))m=l.data;else if(m=typeof s.placeholderData=="function"?s.placeholderData((le=r(this,D))==null?void 0:le.state.data,r(this,D)):s.placeholderData,s.select&&m!==void 0)try{m=s.select(m),u(this,v,null)}catch(U){u(this,v,U)}m!==void 0&&(E="success",g=ge(l==null?void 0:l.data,m,s),F=!0)}r(this,v)&&(L=r(this,v),g=r(this,P),k=Date.now(),E="error");const Y=c.fetchStatus==="fetching",W=E==="pending",Z=E==="error",ce=W&&Y,ue=g!==void 0,x={status:E,fetchStatus:c.fetchStatus,isPending:W,isSuccess:E==="success",isError:Z,isInitialLoading:ce,isLoading:ce,data:g,dataUpdatedAt:c.dataUpdatedAt,error:L,errorUpdatedAt:k,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>R.dataUpdateCount||c.errorUpdateCount>R.errorUpdateCount,isFetching:Y,isRefetching:Y&&!W,isLoadingError:Z&&!ue,isPaused:c.fetchStatus==="paused",isPlaceholderData:F,isRefetchError:Z&&ue,isStale:he(e,s),refetch:this.refetch,promise:r(this,I)};if(this.options.experimental_prefetchInRender){const m=G=>{x.status==="error"?G.reject(x.error):x.data!==void 0&&G.resolve(x.data)},U=()=>{const G=u(this,I,x.promise=fe());m(G)},Q=r(this,I);switch(Q.status){case"pending":e.queryHash===i.queryHash&&m(Q);break;case"fulfilled":(x.status==="error"||x.data!==Q.value)&&U();break;case"rejected":(x.status!=="error"||x.error!==Q.reason)&&U();break}}return x}updateResult(e){const s=r(this,b),i=this.createResult(r(this,n),this.options);if(u(this,j,r(this,n).state),u(this,A,this.options),r(this,j).data!==void 0&&u(this,D,r(this,n)),J(i,s))return;u(this,b,i);const h={},l=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,w=typeof a=="function"?a():a;if(w==="all"||!w&&!r(this,$).size)return!0;const p=new Set(w??r(this,$));return this.options.throwOnError&&p.add("error"),Object.keys(r(this,b)).some(R=>{const T=R;return r(this,b)[T]!==s[T]&&p.has(T)})};(e==null?void 0:e.listeners)!==!1&&l()&&(h.listeners=!0),d(this,o,we).call(this,{...h,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,o,re).call(this)}},y=new WeakMap,n=new WeakMap,V=new WeakMap,b=new WeakMap,j=new WeakMap,A=new WeakMap,I=new WeakMap,v=new WeakMap,B=new WeakMap,P=new WeakMap,D=new WeakMap,M=new WeakMap,N=new WeakMap,S=new WeakMap,$=new WeakMap,o=new WeakSet,z=function(e){d(this,o,ae).call(this);let s=r(this,n).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Ie)),s},ee=function(){d(this,o,ie).call(this);const e=H(this.options.staleTime,r(this,n));if(X||r(this,b).isStale||!pe(e))return;const i=Se(r(this,b).dataUpdatedAt,e)+1;u(this,M,setTimeout(()=>{r(this,b).isStale||this.updateResult()},i))},te=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,n)):this.options.refetchInterval)??!1},se=function(e){d(this,o,ne).call(this),u(this,S,e),!(X||O(this.options.enabled,r(this,n))===!1||!pe(r(this,S))||r(this,S)===0)&&u(this,N,setInterval(()=>{(this.options.refetchIntervalInBackground||_e.isFocused())&&d(this,o,z).call(this)},r(this,S)))},re=function(){d(this,o,ee).call(this),d(this,o,se).call(this,d(this,o,te).call(this))},ie=function(){r(this,M)&&(clearTimeout(r(this,M)),u(this,M,void 0))},ne=function(){r(this,N)&&(clearInterval(r(this,N)),u(this,N,void 0))},ae=function(){const e=r(this,y).getQueryCache().build(r(this,y),this.options);if(e===r(this,n))return;const s=r(this,n);u(this,n,e),u(this,V,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},we=function(e){Oe.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(r(this,b))}),r(this,y).getQueryCache().notify({query:r(this,n),type:"observerResultsUpdated"})})},ve);function Ue(t,e){return O(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ye(t,e){return Ue(t,e)||t.state.data!==void 0&&oe(t,e,e.refetchOnMount)}function oe(t,e,s){if(O(e.enabled,t)!==!1){const i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&he(t,e)}return!1}function Ee(t,e,s,i){return(t!==e||O(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&he(t,s)}function he(t,e){return O(e.enabled,t)!==!1&&t.isStaleByTime(H(e.staleTime,t))}function Qe(t,e){return!J(t.getCurrentResult(),e)}var Te=C.createContext(!1),Ae=()=>C.useContext(Te);Te.Provider;function Pe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var De=C.createContext(Pe()),$e=()=>C.useContext(De);function Fe(t,e){return typeof t=="function"?t(...e):!!t}function Re(){}var Le=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ke=t=>{C.useEffect(()=>{t.clearReset()},[t])},Ye=({result:t,errorResetBoundary:e,throwOnError:s,query:i,suspense:h})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(h&&t.data===void 0||Fe(s,[t.error,i])),ze=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Ve=(t,e)=>t.isLoading&&t.isFetching&&!e,Be=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,xe=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Ge(t,e,s){var c,F,g,L,k;const i=Me(),h=Ae(),l=$e(),a=i.defaultQueryOptions(t);(F=(c=i.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||F.call(c,a),a._optimisticResults=h?"isRestoring":"optimistic",ze(a),Le(a,l),ke(l);const w=!i.getQueryCache().get(a.queryHash),[p]=C.useState(()=>new e(i,a)),R=p.getOptimisticResult(a),T=!h&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(E=>{const Y=T?p.subscribe(Oe.batchCalls(E)):Re;return p.updateResult(),Y},[p,T]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),C.useEffect(()=>{p.setOptions(a,{listeners:!1})},[a,p]),Be(a,R))throw xe(a,p,l);if(Ye({result:R,errorResetBoundary:l,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw R.error;if((L=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||L.call(g,a,R),a.experimental_prefetchInRender&&!X&&Ve(R,h)){const E=w?xe(a,p,l):(k=i.getQueryCache().get(a.queryHash))==null?void 0:k.promise;E==null||E.catch(Re).finally(()=>{p.updateResult()})}return a.notifyOnChangeProps?R:p.trackResult(R)}function et(t,e){return Ge(t,Ne)}const tt=({message:t})=>_.jsx("div",{className:"flex justify-center",children:_.jsx("h3",{className:"font-bold text-red-600 text-2xl",children:t})}),He="/assets/logo-C26QVzBL.png",st=({title:t})=>_.jsxs("nav",{className:"pb-4 flex border-b items-center justify-between flex-col gap-6 md:flex-row md:gap-0",children:[_.jsx(me,{to:"/",children:_.jsx("img",{src:He,alt:"Logo tecnocontrol",className:"w-[150px]"})}),_.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-center text-gray-200",children:t}),_.jsx(me,{to:"/",className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-md transition hover:bg-gradient-to-r hover:from-purple-600 hover:to-blue-500",children:"Dashboard"})]}),Ke={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_HOST:"http://localhost:3000/api",VITE_API_TECNO:"https://www.tcvsat.com.mx/tcvback/v3/api",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyA_qnf2Z2ehmCyAWsUXpYNP3rcUvVGLUA0",VITE_TOKEN:"N2U5YzQyNzgzMTA4ODFhN2U4YTZjZmNkMzU1Yjg3ZjljNWUxYzNlMDRjYjNlODc0MjRiM2Q2YzRkYjkxMTEzNGEyYjcxMjU2YmFjYjAxMzM5YjM1OWU0NzBjYTgwMjMzODI1M2IxOTY5NjI5M2RlNmQyMTBlZDU1ZDU3N2U3M2IK"},{VITE_API_HOST:K,VITE_API_TECNO:We,VITE_TOKEN:Ze,VITE_GOOGLE_MAPS_API_KEY:rt}=Ke,it=async(t="")=>{try{const e=t?`${K}/units?search=${t}`:`${K}/units`,s=await fetch(e);if(!s.ok){const h=`Error ${s.status}: ${s.statusText}`;throw new Error(h)}return(await s.json()).units}catch(e){throw console.log(e.message),new Error("Ah ocurrido un error, intentalo más tarde")}},nt=async(t,{init:e,end:s})=>{try{const i=await fetch(`${We}/events?dtini=${e}&dtfin=${s}&idgps=${t}`,{headers:{"Tcv-Client-Id":Ze}});if(!i.ok){const h=`Error ${i.status}: ${i.statusText}`;throw console.error(h),new Error(h)}return await i.json()}catch(i){throw console.log(i.message),new Error("Ah ocurrido un error, intentalo más tarde")}},at=async(t,e)=>{try{const s=await fetch(`${K}/events/${e}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});if(!s.ok){be.error("Ah ocurrido un error, intentalo más tarde");const h=`Error ${s.status}: ${s.statusText}`;throw new Error(h)}return be.success("Reporte guardado"),(await s.json()).reports}catch(s){throw console.log(s.message),new Error("Ah ocurrido un error, intentalo más tarde")}},ot=async t=>{try{const e=await fetch(`${K}/reports/${t}`);if(!e.ok){const i=`Error ${e.status}: ${e.statusText}`;throw console.error(i),new Error(i)}return(await e.json()).reports}catch(e){throw console.log(e.message),new Error("Ah ocurrido un error, intentalo más tarde")}};export{tt as E,rt as G,st as N,ot as a,at as b,nt as c,it as g,et as u};
